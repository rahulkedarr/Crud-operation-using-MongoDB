<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chat</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
</head>

<body>
    <div class="container">
        <h2 class="text-center">All Chats</h2>
        <div class="text-center">
            <form method="GET" action="/chats/new">
                <button class="btn btn-primary">New Chat</button>
            </form>
        </div>
        <% for(let chat of chats){ %>
            <div class="card" style="
          margin: 20px auto;
          background-color: rgb(195, 231, 231);
          width: 30rem;
        ">
                <div class="card-body">
                    <p>From: <i>
                            <%=chat.from%>
                        </i></p>
                    <p style="
              background-color: rgb(0, 0, 255);
              padding: 5px;
              border-radius: 10px;
              color: white;
            ">
                        <%=chat.msg%>
                    </p>
                    <p>Recieved By: <i>
                            <%=chat.to%>
                        </i></p>
                    <p>Time:<%= chat.created_at.toString().split(" ")[4] %></p>
          <p>
            Date: <%= chat.created_at.toString().split(" ").slice(0, 3).join(" ") %>
          </p>
          <div class=" d-flex justify-content-center">
                            <form method="GET" action="/chats/<%= chat._id%>/edit">
                                <button class="btn btn-primary">Edit</button>
                            </form>
                            <form method="POST" action="/chats/<%= chat._id%>?_method=DELETE">
                                <button class="btn btn-danger ms-2">Delete</button>
                            </form>
                </div>
            </div>
    </div>
    <% } %>
        </div>
</body>

</html>